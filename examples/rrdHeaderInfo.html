<div>
	<h1 id="title">RRD Header Info</h1>

	<div class="form-group">
		<label for="input_fname">rrd file</label>
		<select id="file" onchange="input_update()">
		</select>
	</div>
	<button onclick="input_update()" class="btn btn-default">Update</button>
	<hr />

	<dl class="dl-horizontal">
		<dt>filename</dt><dd id="fname">NA</dd>
		<dt>min step</dt><dd id="step">NA</dd>
		<dt>last update</dt><dd id="last_update">NA</dd>
	</dl>

	<table id="dsInfo" class="table table-condensed table-bordered">
		<caption>DS list</caption>
		<thead><tr><th>Name</th><th>Type</th></tr></thead>
	</table>
	<table id="rraInfo" class="table table-condensed table-bordered">
		<caption>RRA list</caption>
		<thead><tr><th>Index</th><th>Rows</th><th>Steps</th></tr></thead>
	</table>

	<script type="text/javascript">
//<![CDATA[

function update_info(bf) {
	var rrd_data = new RRDFile(bf);
	// cleanup
	$("#dsInfo tbody>tr").remove();
	$("#rraInfo tbody>tr").remove();

	// Generic header info
	$('#fname').text($('#input_fname').val());
	$('#step').text(rrd_data.getMinStep());
	$('#last_update').text(new Date(rrd_data.getLastUpdate()*1000));

	// DS info
	var nrDSs=rrd_data.getNrDSs();
	for (var i=0; i<nrDSs; i++) {
		var oDS=rrd_data.getDS(i);
		$('#dsInfo').append('<tr><td>'+oDS.getName()+'</td><td>'+oDS.getType()+'</td></tr>');
	}

	// RRA Info
	var nrRRAs=rrd_data.getNrRRAs();
	for (var i=0; i<nrRRAs; i++) {
		var oRRA=rrd_data.getRRAInfo(i);
		$('#rraInfo').append('<tr><td>'+i+'</td><td>'+oRRA.getNrRows()+'</td><td>'+oRRA.getStep()+'</td></tr>');
	}
}


function input_update() {
	var bf = new BinaryFile("../example_rrds/"+$('#file').val()+".rrd");
	update_info(bf);
}

fillFileOptions($('#file'));

//	     ]]>

	</script>

</div>
