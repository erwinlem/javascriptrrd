<div>
    <h1 id="title">RRD Graphs with Flot</h1>

    <div class="form-group">
	    <label for="input_fname">rrd file</label>
	    <select id="file" onchange="input_update()">
	    </select>
    </div>
    <button onclick="input_update()" class="btn btn-default">Update</button>
    <hr />

    <table id="infotable" class="table">
	<tr><td><b>RRD file</b></td><td id="fname" colspan="5">None</td></tr>
    </table>

    <div id="mygraph" style="width:960px;height:540px"></div>

    <script type="text/javascript">
//<![CDATA[

// this function is invoked when the RRD file name changes
function input_update() {
	var r = new rrdGraph();
	var bf = new BinaryFile("../example_rrds/"+$('#file').val()+".rrd");
	r.addRrdFile(new RRDFile(bf));
	var rr = r.rrdFiles[0];
	var rra = rr.getRRA(rr.getNrRRAs()-1);
	var e = new Date((rr.getLastUpdate()-rra.getNrRows()*rra.getStep())*1000.0);
	var ds_graph_opts={
		'title':'test',
		yaxis: {
			zoomRange: [0, 100],
			autoscaleMargin: 0
		},
		xaxis: {
			autoscaleMargin: 0,
			mode: "time",
			panRange: [e, new Date(r.rrdFiles[0].getLastUpdate()*1000.0)]
		},
		zoom: { interactive: true, },
		pan: { interactive: true, }
	};

	$.plot('#mygraph', r.getFlotData(), ds_graph_opts);
}

fillFileOptions($('#file'));

//]]>

    </script>
</div>
